{"version":3,"file":"1-timer-fWM_GMtZ.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["import \"../css/styles.css\";\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport iziToast from \"izitoast\";\n\nlet userSelectedDate = null;\nlet timerId = null;\nconst dateInput = document.querySelector(\"#datetime-picker\");\nconst daysSpan = document.querySelector(\"[data-days]\");\nconst hoursSpan = document.querySelector(\"[data-hours]\");\nconst minutesSpan = document.querySelector(\"[data-minutes]\");\nconst secondsSpan = document.querySelector(\"[data-seconds]\");\n\nconst startBtn = document.querySelector(\"[data-start]\");\nstartBtn.disabled = true;\n\n\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    const now = new Date();\n    if(selectedDates[0] <= now) {\n        iziToast.error({\n    title: 'Error',\n    message: 'Please choose a date in the future',\n});\n        startBtn.disabled = true\n    } else {\n        userSelectedDate = selectedDates[0];\n        startBtn.disabled = false;\n\n    }\n  },\n};\nflatpickr(\"#datetime-picker\", options);\n\n\nstartBtn.addEventListener(\"click\", handlerStart);\nfunction handlerStart(event) {\n    if(!userSelectedDate) return;\n        \n        startBtn.disabled = true;\n        dateInput.disabled = true;\n       \n    \n    timerId = setInterval(() => {\n        const now = new Date ();\n        const delta = userSelectedDate - now;\n\n        if(delta <= 0) {\n            clearInterval(timerId);\n            updateTimer({days: 0, hours: 0, minutes: 0, seconds: 0});\n            dateInput.disabled = false;\n            startBtn.disabled = true;\n            return;\n        }\n        const timeData = convertMs(delta);\n        updateTimer(timeData);\n    }, 1000)\n}\nfunction updateTimer({days, hours, minutes, seconds}) {\n    daysSpan.textContent = days;\n    hoursSpan.textContent = addLeadingZero(hours);\n    minutesSpan.textContent = addLeadingZero(minutes);\n    secondsSpan.textContent = addLeadingZero(seconds);\n\n}\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\")\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\n\n\n\n\n"],"names":["userSelectedDate","timerId","dateInput","daysSpan","hoursSpan","minutesSpan","secondsSpan","startBtn","options","selectedDates","now","iziToast","flatpickr","handlerStart","event","delta","updateTimer","timeData","convertMs","days","hours","minutes","seconds","addLeadingZero","value","ms"],"mappings":"mxBAMA,IAAIA,EAAmB,KACnBC,EAAU,KACd,MAAMC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAErDC,EAAW,SAAS,cAAc,cAAc,EACtDA,EAAS,SAAW,GAIpB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5B,MAAMC,EAAM,IAAI,KACbD,EAAc,CAAC,GAAKC,GACnBC,EAAS,MAAM,CACnB,MAAO,QACP,QAAS,oCACb,CAAC,EACOJ,EAAS,SAAW,KAEpBP,EAAmBS,EAAc,CAAC,EAClCF,EAAS,SAAW,GAGzB,CACH,EACAK,EAAU,mBAAoBJ,CAAO,EAGrCD,EAAS,iBAAiB,QAASM,CAAY,EAC/C,SAASA,EAAaC,EAAO,CACrBd,IAEAO,EAAS,SAAW,GACpBL,EAAU,SAAW,GAGzBD,EAAU,YAAY,IAAM,CAExB,MAAMc,EAAQf,EADF,IAAI,KAGhB,GAAGe,GAAS,EAAG,CACX,cAAcd,CAAO,EACrBe,EAAY,CAAC,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAC,EACvDd,EAAU,SAAW,GACrBK,EAAS,SAAW,GACpB,MACH,CACD,MAAMU,EAAWC,EAAUH,CAAK,EAChCC,EAAYC,CAAQ,CACvB,EAAE,GAAI,EACX,CACA,SAASD,EAAY,CAAC,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CAClDnB,EAAS,YAAcgB,EACvBf,EAAU,YAAcmB,EAAeH,CAAK,EAC5Cf,EAAY,YAAckB,EAAeF,CAAO,EAChDf,EAAY,YAAciB,EAAeD,CAAO,CAEpD,CACA,SAASC,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASN,EAAUO,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIJ,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}